{% extends 'base.html' %}
{% load social %}

{% block head_before %}
<meta property="fb:app_id" content="{{ app_id }}">
<meta property="og:title" content="Support {{promise.creator}}">
<meta property="og:type" content="article">
<meta property="og:image" content="https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/211306_1104390006_3470883_n.jpg">
<meta property="og:url" content="{{ promise.get_absolute_url }}">
{% endblock %}

{% block body_before %}
{% fb %}
{% endblock %}

{% block content %}
<div class="row">
  <div class="span3">
    <div class="avatarbox" style="" >
      <img alt="{{ promise.creator.name }}" src="{{ promise.creator.avatar }}">
    </div>
    <div class="supporters">

      <div class="supportit">
        {% if promise.id not in my_promises %}
          {% if promise.id not in already_supporting %}
          <a href="{% url support promise.id user.profile.id %}"
             title="Support this promise" class="btn first">
            Support this promise
          </a>
          {% else %}
          <div class="label label-success first">You support this.</div>
          {% endif %}
        {% else %}
          <div class="first">Share your promise!</div>
        {% endif %}
      </div>

      <h4>{{ promise.supporter.count }} Supporters</h4>
      <ul class="unstyled">
        {% for supporter in promise.supporter.all %}
        <li>
          <a href="#" title="{{ supporter.name }}">
            <img src="{{ supporter.avatar_square }}" alt="{{ supporter.name }}">
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="span6">
    <ul class="promiseinfo unstyled">
      <li class="text">{{ promise.text }}</li>
      <li class="creator">&mdash; {{ promise.creator }}</li>
      <li class="created">{{ promise.created }}</li>
    </ul>

    {% social promise %}

    <div class="followup">
      <h4>Want to follow up this promise?</h4>
      <div
         class="fb-comments" data-href="{{ promise.get_absolute_url }}"
         data-num-posts="4" data-width="470"></div>
    </div>

  </div>
  <div class="span3">
    Related promises
  </div>
</div>

{% comment %}
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'promisely'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

{% endcomment %}
{% endblock %}
